{"componentChunkName":"component---src-templates-post-post-js","path":"/post/vtji2yfsm9r","result":{"data":{"microcmsPosts":{"postsId":"vtji2yfsm9r","localImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/739765cf10c94b92c52b46b5e88f272c/a764f/iris.jpg","srcSet":"/static/739765cf10c94b92c52b46b5e88f272c/37bba/iris.jpg 750w,\n/static/739765cf10c94b92c52b46b5e88f272c/61c72/iris.jpg 1080w,\n/static/739765cf10c94b92c52b46b5e88f272c/d61e8/iris.jpg 1366w,\n/static/739765cf10c94b92c52b46b5e88f272c/a764f/iris.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/739765cf10c94b92c52b46b5e88f272c/a66aa/iris.webp 750w,\n/static/739765cf10c94b92c52b46b5e88f272c/65dd5/iris.webp 1080w,\n/static/739765cf10c94b92c52b46b5e88f272c/4fad6/iris.webp 1366w,\n/static/739765cf10c94b92c52b46b5e88f272c/c512e/iris.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}},"title":"下書き","publishedAt":"2021-06-10T23:11:29.993Z","revisedAt":"2021-06-10T23:11:29.993Z","childProcessedBody":{"body":"<h1 id=\"hf031c5e696\">実装方法</h1><p>処理の流れとしては以下のようになります。<br><br>１. URLから<code>/news/draft?contentId=XXXXXXXX&#x26;draftKey=YYYYYYYY</code>のようにアクセスする<br>２. <code>location.search</code>から<code>contentId</code>と<code>draftKey</code>を受け取る<br>３. microCMSに対して<code>contentId</code>と<code>draftKey</code>を用いてAPIリクエストを行う<br>４. 取得したデータを描画する<br><br><img src=\"https://images.microcms-assets.io/assets/03dfdaee5555474ea4f159039c9e675c/37c530d92eaf4c5e9e6b63e05ad4e358/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202020-08-12%200.55.25.png?w=3360&#x26;h=2100\" alt=\"振り向くねこ\"><br><br>※1: すでにお知らせ詳細画面にて生成されている型定義をそのまま利用するために、microCMSからレスポンスを受け取ってsetDataするタイミングでオブジェクトの形を合わせています。<br>※2: useEffectの第二引数には空配列を指定します。そうすることで初回アクセス時のみ処理が動作します。<br>※3: 表示部分は別コンポーネントに切り出しており、ここでは省略します。実際のニュース詳細画面と共通化しておくと今後の開発がスムーズになるのでオススメです。</p>"}}},"pageContext":{"postsId":"vtji2yfsm9r","previous":{"postsId":"vy2tnxxuhx83","title":"自動デプロイのテスト","localImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#d8a888","images":{"fallback":{"src":"/static/e4d54c4eca177d580b6802d5805fe80a/3a899/IMGP8121.jpg","srcSet":"/static/e4d54c4eca177d580b6802d5805fe80a/53c59/IMGP8121.jpg 750w,\n/static/e4d54c4eca177d580b6802d5805fe80a/7d544/IMGP8121.jpg 1080w,\n/static/e4d54c4eca177d580b6802d5805fe80a/e7538/IMGP8121.jpg 1366w,\n/static/e4d54c4eca177d580b6802d5805fe80a/3a899/IMGP8121.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/e4d54c4eca177d580b6802d5805fe80a/3970f/IMGP8121.webp 750w,\n/static/e4d54c4eca177d580b6802d5805fe80a/80634/IMGP8121.webp 1080w,\n/static/e4d54c4eca177d580b6802d5805fe80a/e175f/IMGP8121.webp 1366w,\n/static/e4d54c4eca177d580b6802d5805fe80a/2fc3f/IMGP8121.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6651041666666666}}},"createdAt":"2021-06-07T10:59:27.283Z"},"next":null}},"staticQueryHashes":["1800391150","2368908723","3078789376","3848813638"]}